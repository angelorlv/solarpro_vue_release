(function(e){function t(t){for(var a,n,o=t[0],c=t[1],r=t[2],u=0,p=[];u<o.length;u++)n=o[u],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&p.push(i[n][0]),i[n]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);d&&d(t);while(p.length)p.shift()();return l.push.apply(l,r||[]),s()}function s(){for(var e,t=0;t<l.length;t++){for(var s=l[t],a=!0,o=1;o<s.length;o++){var c=s[o];0!==i[c]&&(a=!1)}a&&(l.splice(t--,1),e=n(n.s=s[0]))}return e}var a={},i={index:0},l=[];function n(t){if(a[t])return a[t].exports;var s=a[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=a,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(s,a,function(t){return e[t]}.bind(null,a));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var r=0;r<o.length;r++)t(o[r]);var d=c;l.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},1:function(e,t){},"112b":function(e,t,s){"use strict";s("3f18")},1384:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},i=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"p-2"},[s("div",{},[s("span",{staticClass:"text-2xl"},[e._v("Accueil")])])])}],l={data:function(){return{}}},n=l,o=s("2877"),c=Object(o["a"])(n,a,i,!1,null,null,null);t["default"]=c.exports},1787:function(e,t,s){"use strict";s("5ebe")},"3bd8":function(e,t,s){},"3f18":function(e,t,s){},4360:function(e,t,s){"use strict";s.r(t);var a=s("2f62"),i=new a["default"].Store({state:{user:{},status_connect:!1},getters:{getUser:function(e){return e.user}},mutations:{setUser:function(e,t){e.user=t,e.status_connect=!0},deconnect:function(e){e.status_connect=!1}}});t["default"]=i},"4efb":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{},[s("div",{staticClass:"border-b justify-center items-center mb-2 p-2  flex  text-xl"},[s("span",{staticClass:"flex-grow"},[e._v(" Statistique du "),s("span",{staticClass:"font-bold"},[e._v(e._s(e.date_lettre))])]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.date_select,expression:"date_select"}],staticClass:"text-md input",attrs:{type:"date"},domProps:{value:e.date_select},on:{input:function(t){t.target.composing||(e.date_select=t.target.value)}}})]),s("div",{staticClass:"m-2 flex shadow-lg p-2 sticky top-0 rounded-lg border bg-gray-100"},[s("div",{staticClass:"mx-2 flex flex-col"},[s("span",{staticClass:"text-sm"},[e._v(" Type ")]),s("cSelect",{attrs:{datas:e.type_select,label:"label"},on:{selected:e.set_select_type}})],1)])]),0==e.list_length?s("div",{staticClass:"p-5 flex justify-center items-center"},[s("span",{},[e._v("Aucune statistique à Afficher")])]):e._e(),e.list_length>0?s("div",{},[s("div",{},e._l(e.places_stat,(function(t,a){return s("div",{key:a,staticClass:"flex rounded items-center border m-2 duration-300 hover:bg-gray-300 hover:bg-opacity-30"},[s("div",{staticClass:"p-2 h-full bg-gray-200"},[t.visited?s("span",{staticClass:"flex justify-center items-center text-green-500 material-icons"},[e._v(" check_circle ")]):s("span",{staticClass:"flex justify-center items-center text-red-500 material-icons"},[e._v(" unpublished ")])]),s("div",{staticClass:"mx-2 flex flex-col"},[s("div",{staticClass:"flex"},[s("router-link",{staticClass:"font-bold",attrs:{to:{name:"vue_emplacement",params:{id:a}}}},[e._v(e._s(t.place_label))]),s("div",{staticClass:"mx-2"},[s("span",{staticClass:"border-r px-2"},[e._v(" "+e._s(t.regisseur_name)+" ")]),e._v(" "),s("span",{staticClass:"px-2 border-r"},[e._v(" "+e._s(t.annonceur_name)+" ")])])],1),t.visited?s("div",{staticClass:"flex"},[s("span",{staticClass:"px-2"},[e._v(" Par : "+e._s(t.login_user)+" ")]),s("div",{staticClass:"border-l px-2"},[e._v(" A partir de : "),s("span",{staticClass:"font-bold"},[e._v(e._s(parseInt(t.time.enter[0])+3+"H."+t.time.enter[1]+"M."+t.time.enter[2])+" ")]),e._v(" à "),s("span",{staticClass:"font-bold"},[e._v(" "+e._s(parseInt(t.time.exit[0])+3+"H."+t.time.exit[1]+"M."+t.time.exit[2])+" ")])]),s("div",{},[e._v(" Durée Contrôle : "),s("span",{staticClass:"font-bold"},[e._v(" "+e._s(t.duree>=60?t.duree%60:t.duree)+" ")]),e._v(" "),s("span",[e._v(" "+e._s(t.duree>=60?"Minutes":"Secondes")+" ")])])]):e._e()]),s("div",{staticClass:"border-l"})])})),0)]):e._e()])},i=[],l=(s("ac1f"),s("1276"),s("5319"),s("fb6a"),s("d81d"),s("9e5f")),n={components:{cSelect:l["a"]},watch:{date_select:function(e){var t=e.split("-");this.date_lettre=t[2]+" "+this.mois[parseInt(t[1])-1]+" "+t[0],this.recup_stat_control(this.type_select_selected.code)}},data:function(){return{places_stat:{},list_length:0,date_now:"",date_select:(new Date).toISOString().slice(0,19).replace("T"," ").split(" ")[0],date_lettre:"",cat_select:[{label:"Controlé",code:"controled"},{label:"Pas Controlé",code:"no-controled"}],type_select:[{label:"Jour",code:"jour"},{label:"Nuit",code:"nuit"}],type_select_selected:{},cat_select_selected:{},mois:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"]}},methods:{recup_stat_par_jour:function(){var e=this;this.$http.get("a/places/stat?date_check="+this.date_select).then((function(t){t.body.status?(e.list_length=t.body.places_stat.length,e.format_par_jour(t.body.places_stat)):alert(t.body.message)}),(function(e){}))},format_par_jour:function(e){this.places_stat={};for(var t=0;t<e.length;t++){this.places_stat[e[t].place_id]||(this.places_stat[e[t].place_id]={});var s={};s.enter=null!=e[t].time_enter?e[t].time_enter.split(":"):null,s.exit=null!=e[t].time_exit?e[t].time_exit.split(":"):null;var a={time:s,login_user:null!=s.enter&&null!=s.exit?e[t].login_user:null,place_label:e[t].place_label,regisseur_name:e[t].regisseur_name,annonceur_name:e[t].annonceur_name};if(null==s.enter||null==s.exit)a.visited=!1,a.duree=null;else{a.visited=!0;var i=s.enter.map((function(e){return parseInt(e)})),l=s.exit.map((function(e){return parseInt(e)}));i=60*i[0]*60+60*i[1]+i[2],l=60*l[0]*60+60*l[1]+l[2];var n=l-i;a.duree=n}e[t].date_check!=this.date_select&&(a.visited=!1),this.places_stat[e[t].place_id]=a}console.log(this.places_stat)},set_select_cat:function(e){this.cat_select_selected=this.cat_select[e]},set_select_type:function(e){this.type_select_selected=this.type_select[e],this.recup_stat_control(this.type_select_selected.code)},match_select:function(e){return"all"==this.cat_select_selected.code||("controled"==this.cat_select_selected.code?!!e.visited:!e.visited)},recup_stat_control:function(e){var t=this;this.$http.get("a/places/stat/"+e+"?date_check="+this.date_select).then((function(e){e.body.status?(t.list_length=e.body.places_stat.length,t.format_par_jour(e.body.places_stat)):alert(e.body.message)}),(function(e){}))}},mounted:function(){this.date_now=(new Date).toISOString().slice(0,19).replace("T"," ").split(" ")[0];var e=this.date_now.split("-");this.date_lettre=e[2]+" "+this.mois[parseInt(e[1])-1]+" "+e[0]}},o=n,c=s("2877"),r=Object(c["a"])(o,a,i,!1,null,null,null);t["default"]=r.exports},"4f5d":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"flex"},[s("div",{staticClass:"flex-grow duration-300 max-h-screen overflow-auto"},[s("div",{staticClass:"p-2 sticky top-0 bg-gray-100 shadow-lg"},[s("div",{staticClass:"border-b mb-1 flex justify-center items-center pb-2"},[s("div",{staticClass:"flex flex-grow  items-center"},[s("span",{staticClass:"mr-2 text-xl text-gray-700"},[e._v(" Liste des ")]),s("cSelect",{attrs:{datas:e.type_select,label:"label"},on:{selected:e.select_society}})],1),e.in_add_dialog?e._e():s("button",{staticClass:"ml-2 bt rounded-full flex justify-center items-center",on:{click:function(t){return e.show_dialog(!0)}}},[s("span",{staticClass:"material-icons"},[e._v(" add ")]),s("span",[e._v(" Ajouter ")])])])]),s("div",{staticClass:"p-2"},[e.data_soc_list.length>0?s("div",{},e._l(e.data_soc_list,(function(t,a){return s("div",{key:t.id,staticClass:"flex border rounded my-2 flex-col cursor-pointer",class:a==e.index_selected?"shadow-lg border-dashed border-2 border-green-400":"",on:{click:function(t){return e.set_index_selected(a)}}},[s("span",{staticClass:"font-bold text-lg bg-gray-200 p-2"},[e._v(" "+e._s(t.label)+" ")]),s("div",{staticClass:"flex flex-col p-2"},[s("span",{},[e._v(" Login : "),s("span",[e._v(" "+e._s(t.login)+" ")])]),s("span",{},[e._v(" Nombre d'emplacement : "),s("span",[e._v(" "+e._s(t.nb_emplacement)+" ")])])])])})),0):s("div",{staticClass:"flex justify-center items-center"},[s("span",{staticClass:"text-xl"},[e._v("La liste est vide.")])])])]),e.in_add_dialog?s("div",{staticClass:"h-max-screen overflow-auto border-r duration-300 ",style:e.in_add_dialog?{width:"300px"}:{width:"0px"}},[s("div",{staticClass:"p-2 flex justify-center items-center rounded-lg border m-2"},[s("span",{staticClass:"text-xl flex-grow"},[e._v("Ajout "+e._s(e.soc_selected.label_alt))]),s("button",{staticClass:"bt flex justify-center items-center rounded-full",on:{click:function(t){return e.show_dialog(!1)}}},[s("span",{staticClass:"material-icons"},[e._v("clear")])])]),s("div",{staticClass:"duration-300 h-0 flex justify-center items-center",class:e.info.isOn?"h-14":"h-0"},[s("transition",{attrs:{name:"fade"}},[e.info.isOn?s("div",{staticClass:"rounded p-2 ",class:e.info.success?"bg-green-400":"bg-red-400"},[s("span",[e._v(" "+e._s(e.info.message)+" ")])]):e._e()])],1),s("div",{staticClass:"p-2 flex justify-center items-center"},[s("form",{attrs:{action:"post"},on:{submit:function(t){return t.preventDefault(),e.post_soc.apply(null,arguments)}}},[s("div",{staticClass:"flex flex-col"},[s("span",{staticClass:"text-xs my-1"},[e._v(" Login * ")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.soc_model.login,expression:"soc_model.login"}],staticClass:"input",attrs:{type:"text",autofocus:"",placeholder:"Login ..."},domProps:{value:e.soc_model.login},on:{input:function(t){t.target.composing||e.$set(e.soc_model,"login",t.target.value)}}})]),s("div",{staticClass:"flex flex-col"},[s("span",{staticClass:"text-xs my-1"},[e._v(" Mot de passe * ")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.soc_model.pass,expression:"soc_model.pass"}],staticClass:"input",attrs:{type:"text",placeholder:"Mot de passe ..."},domProps:{value:e.soc_model.pass},on:{input:function(t){t.target.composing||e.$set(e.soc_model,"pass",t.target.value)}}})]),s("div",{staticClass:"flex flex-col"},[s("span",{staticClass:"text-xs my-1"},[e._v(" Libellé * ")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.soc_model.label,expression:"soc_model.label"}],staticClass:"input",attrs:{type:"text",placeholder:"Libellé ..."},domProps:{value:e.soc_model.label},on:{input:function(t){t.target.composing||e.$set(e.soc_model,"label",t.target.value)}}})]),s("div",{staticClass:"flex flex-col"},[s("span",{staticClass:"text-xs my-1"},[e._v(" Libellé alt ")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.soc_model.label_alt,expression:"soc_model.label_alt"}],staticClass:"input",attrs:{type:"text",placeholder:"Libellé alt..."},domProps:{value:e.soc_model.label_alt},on:{input:function(t){t.target.composing||e.$set(e.soc_model,"label_alt",t.target.value)}}})]),e._m(0)])])]):e._e(),-1==e.index_selected||e.on_modif?e._e():s("div",{staticClass:"  max-h-screen overflow-auto border-r duration-300 ",style:-1!=e.index_selected?{width:"300px"}:{width:"0px"}},[s("div",{staticClass:"p-2 m-2 rounded-lg border"},[s("span",{staticClass:"p-2 text-lg"},[e._v(" Information sur "+e._s(e.soc_selected.label_alt)+" ")])]),s("div",{staticClass:"m-2 p-2 rounded-lg border"},[s("div",{staticClass:"border rounded-lg p-2 my-1"},[s("span",[e._v(" Libellé : ")]),s("span",[e._v(" "+e._s(e.data_soc_info.label)+" ")])]),s("div",{staticClass:"border rounded-lg p-2 my-1"},[s("div",{staticClass:"flex justify-center items-center"},[s("div",{staticClass:"flex-grow"},[s("span",[e._v(" "+e._s("regisseur"==e.soc_selected.code?"Nombre annonceurs":"Nombre regisseurs")+" : ")]),s("span",[e._v(" "+e._s(e.data_soc_info.nb_abonnement)+" ")])]),parseInt(e.data_soc_info.nb_abonnement)>0?s("button",{staticClass:"flex justify-center items-center",on:{click:e.toggle_show_subs}},[s("span",{staticClass:"material-icons"},[e._v(" "+e._s(e.subs.show?"expand_less":"expand_more")+" ")])]):e._e()]),e.subs.show?s("div",{staticClass:"pl-3 duration-300 flex flex-col"},e._l(e.subs.list,(function(t){return s("span",{key:t.id,staticClass:"text-sm"},[e._v(" "+e._s(t.label)+" ")])})),0):e._e()]),s("div",{staticClass:"border rounded-lg p-2 my-1"},[s("div",{staticClass:"flex justify-center items-center"},[s("div",{staticClass:"flex-grow"},[s("span",{},[e._v(" Nombre emplacement : ")]),s("span",[e._v(" "+e._s(e.data_soc_info.nb_emplacement)+" ")])]),parseInt(e.data_soc_info.nb_emplacement)>0?s("button",{staticClass:"flex justify-center items-center",on:{click:e.toggle_show_places}},[s("span",{staticClass:"material-icons"},[e._v(" "+e._s(e.places.show?"expand_less":"expand_more")+" ")])]):e._e()]),e.places.show?s("div",{staticClass:"pl-3 duration-300 flex-col"},e._l(e.places.list,(function(t){return s("span",{key:t.id,staticClass:"text-sm"},[e._v(" "+e._s(t.label)+" ")])})),0):e._e()])]),s("div",{staticClass:"m-2 sticky bottom-0 rounded-lg border shadow-lg p-2 flex items-center"},[s("div",{staticClass:"flex-grow"},[s("button",{staticClass:"flex justify-center items-center bt rounded-full",on:{click:e.delete_soc}},[s("span",{staticClass:"material-icons"},[e._v(" delete ")]),s("span",[e._v(" Supprimer ")])])]),s("button",{staticClass:"flex justify-center items-center bt rounded-full",on:{click:function(t){return e.show_modif(!0)}}},[s("span",{staticClass:"material-icons"},[e._v(" edit ")]),s("span",[e._v(" Modifier ")])])])]),0!=e.in_add_dialog||-1!=e.index_selected||e.on_modif?e._e():s("div",{staticClass:"flex max-h-screen overflow-auto border-r duration-300 h-screen justify-center items-center ",staticStyle:{width:"300px"}},[s("span",{staticClass:"text-gray-500 text-center"},[e._v(" Cliquer sur un élément pour voir les infos ")])]),e.on_modif&&-1!=e.index_selected?s("div",{staticClass:"flex flex-col max-h-screen overflow-auto border-r duration-300 h-screen  ",staticStyle:{width:"300px"}},[s("div",{staticClass:"p-2 flex justify-center items-center rounded-lg border m-2"},[s("span",{staticClass:"text-xl flex-grow"},[e._v("Modification "+e._s(e.soc_selected.label_alt))]),s("button",{staticClass:"bt flex justify-center items-center rounded-full",on:{click:function(t){return e.show_modif(!1)}}},[s("span",{staticClass:"material-icons"},[e._v("clear")])])]),s("div",{staticClass:"duration-300 h-0 flex justify-center items-center",class:e.info.isOn?"h-14":"h-0"},[s("transition",{attrs:{name:"fade"}},[e.info.isOn?s("div",{staticClass:"rounded p-2 ",class:e.info.success?"bg-green-400":"bg-red-400"},[s("span",[e._v(" "+e._s(e.info.message)+" ")])]):e._e()])],1),s("div",{staticClass:"p-2 flex justify-center items-center"},[s("form",{attrs:{action:"post"},on:{submit:function(t){return t.preventDefault(),e.modif_soc.apply(null,arguments)}}},[s("div",{staticClass:"flex flex-col"},[s("span",{staticClass:"text-xs my-1"},[e._v(" Login * ")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.soc_modif_model.login,expression:"soc_modif_model.login"}],staticClass:"input",attrs:{type:"text",autofocus:"",placeholder:"Login ..."},domProps:{value:e.soc_modif_model.login},on:{input:function(t){t.target.composing||e.$set(e.soc_modif_model,"login",t.target.value)}}})]),s("div",{staticClass:"flex flex-col"},[s("span",{staticClass:"text-xs my-1"},[e._v(" Mot de passe * ")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.soc_modif_model.pass,expression:"soc_modif_model.pass"}],staticClass:"input",attrs:{type:"text",placeholder:"Mot de passe ..."},domProps:{value:e.soc_modif_model.pass},on:{input:function(t){t.target.composing||e.$set(e.soc_modif_model,"pass",t.target.value)}}})]),s("div",{staticClass:"flex flex-col"},[s("span",{staticClass:"text-xs my-1"},[e._v(" Libellé * ")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.soc_modif_model.label,expression:"soc_modif_model.label"}],staticClass:"input",attrs:{type:"text",placeholder:"Libellé ..."},domProps:{value:e.soc_modif_model.label},on:{input:function(t){t.target.composing||e.$set(e.soc_modif_model,"label",t.target.value)}}})]),s("div",{staticClass:"flex flex-col"},[s("span",{staticClass:"text-xs my-1"},[e._v(" Libellé alt ")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.soc_modif_model.label_alt,expression:"soc_modif_model.label_alt"}],staticClass:"input",attrs:{type:"text",placeholder:"Libellé alt..."},domProps:{value:e.soc_modif_model.label_alt},on:{input:function(t){t.target.composing||e.$set(e.soc_modif_model,"label_alt",t.target.value)}}})]),e._m(1)])])]):e._e()])},i=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"pt-2 mt-2 border-t flex justify-end"},[s("button",{staticClass:"bt rounded-full flex justify-center items-center"},[s("span",{staticClass:"material-icons"},[e._v("add_circle")]),s("span",[e._v("Créer")])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"pt-2 mt-2 border-t flex justify-end"},[s("button",{staticClass:"bt rounded-full flex justify-center items-center"},[s("span",{staticClass:"material-icons"},[e._v("add_circle")]),s("span",[e._v("Valider modification")])])])}],l=s("9e5f"),n={components:{cSelect:l["a"]},data:function(){return{type_select:[{label:"Regisseurs",label_alt:"Régisseur",code:"regisseur"},{label:"Annonceurs",label_alt:"Annonceur",code:"annonceur"}],soc_selected:{},data_soc_list:[],in_add_dialog:!1,soc_model:{login:"",pass:"",label:"",label_alt:"",type:""},soc_modif_model:{login:"",label:"",label_alt:"",type:""},info:{success:"",message:"",isOn:!1,idTimeout:-1},style_dialog:{marginTop:"-100px",opacity:0},index_selected:-1,data_soc_info:{},subs:{list:[],show:!1},places:{list:[],show:!1},on_modif:!1,on_info:!1}},watch:{index_selected:function(e){this.places.show=!1,this.places.list=[],this.subs.show=!1,this.subs.list=[],-1!=e&&this.get_info_society(),this.on_modif=!1},on_modif:function(e){e&&(this.soc_modif_model={login:this.data_soc_info.login,label:this.data_soc_info.label,pass:this.data_soc_info.pass,label_alt:this.data_soc_info.label_alt})}},methods:{select_society:function(e){this.soc_selected=this.type_select[e],this.soc_model.type=this.soc_selected.code,this.index_selected=-1,this.recup_list_society()},recup_list_society:function(){var e=this;this.$http.get("a/society?type="+this.soc_selected.code).then((function(t){t.body.status?e.data_soc_list=t.body.soc:alert(t.body.message)}),(function(e){}))},post_soc:function(){var e=this;this.$http.post("a/society",this.soc_model).then((function(t){t.body.status?(e.soc_model={login:"",pass:"",label:"",label_alt:"",type:e.soc_selected.code},e.show_dialog(!1),e.recup_list_society()):e.show_info(t.body.status,t.body.message)}),(function(e){}))},show_info:function(e,t,s){var a=this;this.info.message=t,this.info.isOn=!0,this.info.success=e,-1!=this.info.idTimeout&&clearTimeout(this.info.idTimeout),this.info.idTimeout=setTimeout((function(){a.info.isOn=!1,void 0!=s&&s()}),2e3)},show_dialog:function(e){this.in_add_dialog=e,e&&(this.index_selected=-1)},set_index_selected:function(e){this.in_add_dialog=!1,this.index_selected=e},get_info_society:function(){var e=this;this.$http.get("a/society/"+this.data_soc_list[this.index_selected].id+"/"+this.soc_selected.code).then((function(t){t.body.status&&(e.data_soc_info=t.body.soc)}))},toggle_show_places:function(){if(this.places.show=!this.places.show,this.places.show){var e=this;this.$http.get("a/society/places/"+this.data_soc_list[this.index_selected].id+"/"+this.soc_selected.code).then((function(t){t.body.status?e.places.list=t.body.places:alert(t.body.message)}))}},toggle_show_subs:function(){if(this.subs.show=!this.subs.show,this.subs.show){var e=this;this.$http.get("a/society/subs/"+this.data_soc_list[this.index_selected].id+"/"+this.soc_selected.code).then((function(t){t.body.status?e.subs.list=t.body.subs:alert(t.body.message)}))}},delete_soc:function(){var e=confirm("Voulez vous vraiment proceder à la suppression ?");if(e){var t=this;this.$http.delete("a/society/"+this.data_soc_list[this.index_selected].id+"/"+this.soc_selected.code).then((function(e){e.body.status?(t.recup_list_society(),t.index_selected=-1):alert(e.body.message)}),(function(e){alert("Erreur de réseau")}))}},show_modif:function(e){this.on_modif=e},modif_soc:function(){var e=this;this.$http.put("a/society/"+this.data_soc_list[this.index_selected].id,this.soc_modif_model).then((function(t){t.body.status?(e.show_modif(!1),e.get_info_society(),e.recup_list_society()):e.show_info(t.body.status,t.body.message)}),(function(t){e.show_info(!1,"Erreur réseau")}))}}},o=n,c=s("2877"),r=Object(c["a"])(o,a,i,!1,null,null,null);t["default"]=r.exports},"56d7":function(e,t,s){"use strict";s.r(t);s("e260"),s("e6cf"),s("cca6"),s("a79d");var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"flex flex-col justify-center items-center bg-gray-200 h-screen w-screen",attrs:{id:"app"}},[s("transition",{attrs:{name:"fade",mode:"out-in"}},[e.data_loaded?s("div",{},[e.$store.state.status_connect?s("div",{staticClass:"w-screen h-screen max-h-screen"},[s("contents")],1):s("div",{staticClass:"w-screen"},[s("login")],1)]):e._e()])],1)},i=[],l=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"flex h-screen w-screen"},[s("sidebar"),s("div",{staticClass:"h-screen max-h-screen overflow-auto bg-gray-100 w-screen border-l border-blue-200"},[s("router-view")],1)],1)},n=[],o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"h-screen max-h-screen flex flex-col overflow-auto",style:e.sidebar_style},[s("div",{staticClass:"p-2 border-b  border-gray-300 text-gray-700"},[e._m(0),s("div",{staticClass:"flex justify-center items-center"},[s("div",{staticClass:"flex-grow "},[s("span",[e._v("Bonjour, ")]),s("span",{staticClass:"font-bold"},[e._v(e._s(e.$store.state.user.login))])]),s("button",{staticClass:"bt rounded-full flex justify-center items-center",on:{click:e.deconnexion}},[s("span",{staticClass:"material-icons"},[e._v(" logout ")])])])]),s("div",{staticClass:"p-2"},[s("router-link",{staticClass:"menu_sidebar",attrs:{to:{name:"home"}}},[s("span",{staticClass:"material-icons"},[e._v(" home ")]),s("span",{staticClass:"ml-5"},[e._v(" Accueil ")])]),s("router-link",{staticClass:"menu_sidebar",attrs:{to:{name:"emplacement"}}},[s("span",{staticClass:"material-icons text-blue-700"},[e._v(" place ")]),s("span",{staticClass:"ml-5"},[e._v(" Emplacement ")])]),s("router-link",{staticClass:"menu_sidebar",attrs:{to:{name:"society"}}},[s("span",{staticClass:"material-icons text-purple-500"},[e._v(" groups ")]),s("span",{staticClass:"ml-5"},[e._v(" Regisseurs/Annonceurs ")])]),s("router-link",{staticClass:"menu_sidebar",attrs:{to:{name:"stat"}}},[s("span",{staticClass:"material-icons text-pink-700"},[e._v(" analytics ")]),s("span",{staticClass:"ml-5"},[e._v(" Statistiques ")])]),s("router-link",{staticClass:"menu_sidebar",attrs:{to:{name:"user"}}},[s("span",{staticClass:"material-icons"},[e._v(" face ")]),s("span",{staticClass:"ml-5"},[e._v(" Utilisateur ")])]),s("router-link",{staticClass:"menu_sidebar",attrs:{to:{name:"settings"}}},[s("span",{staticClass:"material-icons"},[e._v(" settings ")]),s("span",{staticClass:"ml-5"},[e._v(" Paramètres ")])])],1)])},c=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{},[s("span",{staticClass:"text-3xl"},[e._v(" Solarpro ")]),e._v(" "),s("span",{staticClass:"text-xl"},[e._v("Admin")])])}],r={data:function(){return{sidebar_style:{minWidth:"250px"}}},methods:{deconnexion:function(){var e=this;this.$http.get("a/deconnect").then((function(t){t.body.status?e.$store.commit("deconnect"):alert(t.body.message)}),(function(e){}))}}},d=r,u=s("2877"),p=Object(u["a"])(d,o,c,!1,null,null,null),m=p.exports,_={components:{sidebar:m},data:function(){return{}},created:function(){console.log(this.$route)}},f=_,v=Object(u["a"])(f,l,n,!1,null,null,null),h=v.exports,g=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"flex w-full "},[s("div",{staticClass:"flex flex-col justify-center bg-green-400 items-center h-screen pl-5 duration-300",class:{"w-full":"about"==e.state,hidden:"login"==e.state},on:{click:function(t){return e.change_state("about")}}},[s("span",{staticClass:"font-bold text-gray-700 text-7xl"},[e._v("Solarpro")]),s("span",{staticClass:"font-bold text-gray-600 pl-5 text-5xl"},[e._v("Admin")]),"about"==e.state?s("button",{staticClass:"bt rounded-full animate-bounce mt-5",on:{click:function(t){return e.change_state("login")}}},[e._v("Connexion")]):e._e()]),s("div",{staticClass:"duration-300 h-screen w-1/2 flex flex-col justify-center items-center bg-gray-100 border-l border-blue-200",class:{"w-full":"login"==e.state,"hidden opacity-50":"about"==e.state},on:{click:function(t){return e.change_state("login")}}},[s("form",{staticClass:"flex flex-col justify-center items-center",attrs:{action:"/",method:"post"},on:{submit:function(t){return t.preventDefault(),e.connect.apply(null,arguments)}}},[e._m(0),s("div",{staticClass:"duration-300 h-2 z-0",class:{"h-14":e.msg_info.active}},[s("transition",{attrs:{name:"fade"}},[e.msg_info.active?s("div",{staticClass:" p-2 rounded border",class:{"bg-red-500":!e.msg_info.success,"bg-green-500":e.msg_info.success}},[s("span",[e._v(" "+e._s(e.msg_info.message)+" ")])]):e._e()])],1),s("div",{staticClass:"my-2"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.login,expression:"user.login"}],staticClass:"input",attrs:{id:"u_login",type:"text",placeholder:"Identifiant"},domProps:{value:e.user.login},on:{input:function(t){t.target.composing||e.$set(e.user,"login",t.target.value)}}})]),s("div",{staticClass:"my-2"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.pass,expression:"user.pass"}],staticClass:"input",attrs:{id:"u_pass",type:"password",placeholder:"Mot de passe ..."},domProps:{value:e.user.pass},on:{input:function(t){t.target.composing||e.$set(e.user,"pass",t.target.value)}}})]),e._m(1)])])])},b=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"border-b pb-3 mb-2 "},[s("span",{staticClass:"text-3xl"},[e._v(" Solarpro ")]),e._v(" "),s("span",{staticClass:"text-xl"},[e._v("Admin")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"my-2 justify-center flex"},[s("button",{staticClass:"bt rounded-full duration-300"},[e._v("Connexion")])])}],x={data:function(){return{user:{login:"",pass:""},error_login:{isOn:!1,message:""},msg_info:{active:!1,success:!1,message:""},id_time_out:-1,state:"login"}},methods:{connect:function(){var e=this;this.$http.post("p/auth",this.user).then((function(t){t.body.status?(e.show_msg_info(t.body.message,!0),e.$store.commit("setUser",t.body.user),setTimeout((function(){}),1e3)):(document.querySelector("#u_login").focus(),e.show_msg_info(t.body.message))}),(function(e){}))},show_msg_info:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.msg_info.active=!0,this.msg_info.message=e,this.msg_info.success=t;var s=this;-1!=this.id_time_out&&clearTimeout(this.id_time_out),this.id_time_out=setTimeout((function(){s.msg_info.active=!1,s.msg_info.message="",s.id_time_out=-1}),2e3)},change_state:function(e){"login"==e&&"login"!=this.state&&document.querySelector("#u_login").focus(),this.state=e}}},y=x,C=(s("9ce0"),Object(u["a"])(y,g,b,!1,null,null,null)),w=C.exports,j={data:function(){return{d:"",data_loaded:!1}},name:"App",components:{login:w,contents:h},methods:{test_recup_data:function(){this.$http.get("p/test").then((function(e){console.log(e)}),(function(e){}))},check_connect:function(){var e=this;this.$http.get("a/check_connect").then((function(t){t.body.status?e.$store.commit("setUser",t.body.user):e.$store.commit("deconnect"),e.data_loaded=!0}),(function(e){}))}},created:function(){this.check_connect()}},$=j,k=(s("1787"),Object(u["a"])($,a,i,!1,null,"1b21ddea",null)),P=k.exports,L=s("1157"),O=s.n(L),N=s("8c4f"),T=(s("845f"),s("2b0e").default),E=s("28dd").default,M=s("2f62").default,A=s("e26c").default;T.use(E),T.use(M),T.use(N["a"]),window.$=O.a,T.config.productionTip=!1,T.http.options.root="/api",T.http.headers.common["Authorization"]="Basic YXBpOnBhc3N3b3Jk";var S=s("4360").default;new T({store:S,router:A,render:function(e){return e(P)}}).$mount("#app")},"56d9":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{},[s("div",{},[e._m(0),s("div",{},[s("div",{staticClass:"flex flex-col m-2"},[s("div",{staticClass:"flex flex-col m-2"},[s("span",[e._v("Debut contrôle de jour")]),e.on_modif_date_control?s("input",{directives:[{name:"model",rawName:"v-model",value:e.settings.temp_control_jour,expression:"settings.temp_control_jour"}],staticClass:"input",attrs:{type:"time"},domProps:{value:e.settings.temp_control_jour},on:{input:function(t){t.target.composing||e.$set(e.settings,"temp_control_jour",t.target.value)}}}):s("span",{staticClass:"input"},[e._v(" "+e._s(e.settings.temp_control_jour)+" ")])]),s("div",{staticClass:"flex flex-col m-2"},[s("span",[e._v("Debut contrôle de nuit")]),e.on_modif_date_control?s("input",{directives:[{name:"model",rawName:"v-model",value:e.settings.temp_control_nuit,expression:"settings.temp_control_nuit"}],staticClass:"input",attrs:{type:"time"},domProps:{value:e.settings.temp_control_nuit},on:{input:function(t){t.target.composing||e.$set(e.settings,"temp_control_nuit",t.target.value)}}}):s("span",{staticClass:"input"},[e._v(" "+e._s(e.settings.temp_control_nuit)+" ")])]),s("div",{},[e.on_modif_date_control?s("div",{staticClass:"flex "},[s("button",{staticClass:"mx-2 bt flex justify-center items-center rounded-full",on:{click:function(t){return e.show_modif_date_control(!1)}}},[s("span",{staticClass:"material-icons"},[e._v(" clear ")])]),s("button",{staticClass:"bt flex justify-center items-center rounded-full",on:{click:e.post_modif_date_control}},[s("span",{staticClass:"material-icons"},[e._v("edit")]),s("span",[e._v("Valider")])])]):s("div",{staticClass:"mx-2"},[s("button",{staticClass:"bt flex justify-center items-center rounded-full",on:{click:function(t){return e.show_modif_date_control(!0)}}},[s("span",{staticClass:"material-icons"},[e._v(" edit ")]),s("span",[e._v(" Modifier ")])])])])])])])])},i=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:" p-2 border-b"},[s("span",{staticClass:"text-lg"},[e._v("Date de contrôle - ")])])}],l={data:function(){return{settings:{},on_modif_date_control:!1}},methods:{recup_settings:function(){var e=this;this.$http.get("a/settings").then((function(t){t.body.status&&(e.settings=t.body.settings)}),(function(e){alert("Erreur de réseau")}))},show_modif_date_control:function(e){this.on_modif_date_control=e},post_modif_date_control:function(){var e=this;this.$http.put("a/settings/"+this.settings.id,this.settings).then((function(t){t.body.status?e.show_modif_date_control(!1):alert("Erreur de modification")}),(function(e){alert("Erreur de réseau")}))}},mounted:function(){this.recup_settings()}},n=l,o=s("2877"),c=Object(o["a"])(n,a,i,!1,null,null,null);t["default"]=c.exports},"5ebe":function(e,t,s){},"6fb8":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"p-2"},[s("div",{},[s("div",{staticClass:"border-b mb-3 flex justify-center items-center pb-2"},[s("span",{staticClass:"text-xl text-gray-700 flex-grow"},[e._v(" Liste des emplacements - ")]),s("button",{staticClass:"ml-2 bt rounded-full flex justify-center items-center",on:{click:function(t){return e.show_add_place(!0)}}},[s("span",{staticClass:"material-icons"},[e._v(" add ")]),s("span",[e._v(" Ajouter ")])])]),s("div",{staticClass:"mb-2 sticky top-0 flex items-end  rounded bg-gray-100 border-b shadow-lg p-2"},[s("div",{staticClass:" p-2 border"},[e._m(0),s("div",{staticClass:"flex mt-2"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.search,expression:"search",modifiers:{trim:!0}}],staticClass:"input mr-",attrs:{type:"text",placeholder:"Rechercher une place ..."},domProps:{value:e.search},on:{input:function(t){t.target.composing||(e.search=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),s("cSelect",{attrs:{datas:e.search_cat,label:"label"},on:{selected:e.set_select_search_cat}})],1)]),s("div",{staticClass:"flex flex-col p-2 mx-2 h-full border rounded"},[s("span",{staticClass:"text-sm"},[e._v("Trier par :")]),s("cSelect",{attrs:{datas:e.tri_select,label:"label"},on:{selected:e.set_select_tri}})],1)]),s("div",{},[0!=e.places.list.length?s("div",{},[s("ctable",{attrs:{search:e.search,col_search:e.search_cat_selected.code,_head:e.places.head,_list:e.places.list,_key:"id"},on:{on_delete:e.delete_place,on_view:e.view_place}})],1):s("div",{staticClass:"w-full flex justify-center items-center"},[s("span",{staticClass:"text-xl text-gray-600"},[e._v(" Aucun emplacement à afficher. ")])])])]),s("addPlace",{attrs:{show:e.on_add_place,places_list:e.places.list},on:{close:function(t){return e.show_add_place(!1)},success_add:e.recup_place_list}})],1)},i=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"flex "},[s("span",{staticClass:"text-sm"},[e._v("Recherche ... ")])])}],l=s("ae38"),n=s("e11e"),o=s.n(n),c=s("9e5f"),r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.show?s("div",{staticClass:"fixed flex justify-center items-center top-0 left-0 w-screen h-screen bg-gray-800 bg-opacity-80"},[s("div",{staticClass:"bg-gray-100 border flex flex-col rounded shadow-lg",style:{minWidth:"400px",width:"900px",height:"500px"}},[s("div",{staticClass:"border-b p-2 flex"},[s("div",{staticClass:"flex-grow flex items-center"},[s("span",{staticClass:" text-2xl text-gray-700 font-bold"},[e._v("Ajout d'un emplacement")]),e.info.isOn?s("div",{staticClass:"rounded p-1 mx-2",class:e.info.success?"bg-green-400":"bg-red-400"},[s("span",[e._v(" "+e._s(e.info.message)+" ")])]):e._e()]),s("button",{staticClass:"w-8 h-8 rounded-full flex justify-center items-center text-gray-600\n                hover:text-gray-800 duration-300",on:{click:function(t){return e.show_add_place(!1)}}},[s("span",{staticClass:"material-icons"},[e._v("clear")])])]),s("div",{staticClass:"flex w-full"},[s("div",{staticClass:"flex-grow",staticStyle:{width:"100%"}},[s("LeafletMap",{attrs:{places:e.places_list,radius:e.places.model.radius},on:{position:e.position,place_name:e.place_name}})],1),s("div",{staticClass:"flex flex-col overflow-y-auto",style:{height:"450px",width:"400px"}},[s("form",{staticClass:"flex flex-col ",attrs:{action:"/",method:"post"},on:{submit:function(t){return t.preventDefault(),e.post_add_place.apply(null,arguments)}}},[s("div",{staticClass:"mt-2 p-2 flex flex-col justify-end overflow-auto"},[s("div",{staticClass:"flex flex-col pr-2"},[s("div",{staticClass:"mt-1 flex flex-col"},[s("span",{staticClass:"text-sm text-gray-600"},[e._v(" Latitude et Longitude ... ")]),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.places.model.latlng,expression:"places.model.latlng",modifiers:{trim:!0}}],staticClass:"input",attrs:{type:"text",placeholder:"@exemple  -14.545454545, 48.15465445646546 ..."},domProps:{value:e.places.model.latlng},on:{input:function(t){t.target.composing||e.$set(e.places.model,"latlng",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),s("div",{staticClass:"mt-1 flex flex-col"},[s("span",{staticClass:"text-sm text-gray-600"},[e._v(" Rayon (en mètre) ... ")]),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.places.model.radius,expression:"places.model.radius",modifiers:{trim:!0}}],staticClass:"input",attrs:{type:"number",placeholder:"@exemple 50 ..."},domProps:{value:e.places.model.radius},on:{input:function(t){t.target.composing||e.$set(e.places.model,"radius",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),s("div",{staticClass:"mt-1 flex flex-col"},[s("span",{staticClass:"text-sm text-gray-600"},[e._v(" Lieu ... ")]),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.places.model.label,expression:"places.model.label",modifiers:{trim:!0}}],staticClass:"input",attrs:{type:"text",placeholder:"@exemple Analakely ..."},domProps:{value:e.places.model.label},on:{input:function(t){t.target.composing||e.$set(e.places.model,"label",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),s("div",{staticClass:"mt-1 flex flex-col"},[s("span",{staticClass:"text-sm text-gray-600"},[e._v(" Régisseur ... ")]),s("select",{directives:[{name:"model",rawName:"v-model",value:e.places.model.regisseur_id,expression:"places.model.regisseur_id"}],staticClass:"input",on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.places.model,"regisseur_id",t.target.multiple?s:s[0])}}},e._l(e.regisseur.list,(function(t,a){return s("option",{key:t.id,domProps:{selected:0==a,value:t.id}},[e._v(" "+e._s(t.label)+" ")])})),0)]),s("div",{staticClass:"mt-1 flex flex-col"},[s("span",{staticClass:"text-sm text-gray-600"},[e._v(" Annonceur ... ")]),s("select",{directives:[{name:"model",rawName:"v-model",value:e.places.model.annonceur_id,expression:"places.model.annonceur_id"}],staticClass:"input",on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.places.model,"annonceur_id",t.target.multiple?s:s[0])}}},e._l(e.annonceur.list,(function(t,a){return s("option",{key:t.id,domProps:{selected:0==a,value:t.id}},[e._v(" "+e._s(t.label)+" ")])})),0)]),s("div",{staticClass:"mt-1 flex flex-col"},[s("span",{staticClass:"text-sm text-gray-600"},[e._v(" Dimension Panneau ... ")]),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.places.model.dimension_panneau,expression:"places.model.dimension_panneau",modifiers:{trim:!0}}],staticClass:"input",attrs:{type:"text",placeholder:"Dimension panneau..."},domProps:{value:e.places.model.dimension_panneau},on:{input:function(t){t.target.composing||e.$set(e.places.model,"dimension_panneau",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),s("div",{staticClass:"mt-1 flex flex-col"},[s("span",{staticClass:"text-sm text-gray-600"},[e._v(" Nombre de lumière ... ")]),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.places.model.nombre_light,expression:"places.model.nombre_light",modifiers:{trim:!0}}],staticClass:"input",attrs:{type:"number",min:"1",max:"100",placeholder:"Nombre de lumière ..."},domProps:{value:e.places.model.nombre_light},on:{input:function(t){t.target.composing||e.$set(e.places.model,"nombre_light",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),s("div",{staticClass:"mt-1 flex flex-col"},[s("span",{staticClass:"text-sm text-gray-600"},[e._v(" Date de début ... ")]),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.places.model.date_debut,expression:"places.model.date_debut",modifiers:{trim:!0}}],staticClass:"input",attrs:{type:"date",placeholder:"Nombre de lumière ..."},domProps:{value:e.places.model.date_debut},on:{input:function(t){t.target.composing||e.$set(e.places.model,"date_debut",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),s("div",{staticClass:"mt-1 flex flex-col"},[s("span",{staticClass:"text-sm text-gray-600"},[e._v(" Photo Jour ... ")]),s("div",{staticClass:"w-full"},[null!=e.places_image.image_jour.src?s("div",{staticClass:"flex  border-2 border-gray-300 rounded-lg relative"},[s("img",{staticClass:"rounded-lg",attrs:{src:e.places_image.image_jour.src,alt:"",srcset:""}}),s("button",{staticClass:"absolute bt rounded-full w-8 h-8 justify-center items-center flex",on:{click:function(t){return t.preventDefault(),e.delete_image("jour")}}},[s("span",{staticClass:"material-icons"},[e._v(" clear ")])])]):s("label",{staticClass:" rounded-lg flex cursor-pointer justify-center items-center w-full border-dashed border-2 h-16 border-blue-400 bg-blue-300",attrs:{for:"photo_jour"}},[s("span",[e._v("Cliquer pour insérer une photo")])]),s("input",{staticClass:"hidden",attrs:{accept:"image/*",id:"photo_jour",type:"file"},on:{change:function(t){return e.upload_image("jour",t)}}})])]),s("div",{staticClass:"mt-1 flex flex-col"},[s("span",{staticClass:"text-sm text-gray-600"},[e._v("Photo Nuit ... ")]),s("div",{staticClass:"w-full"},[null!=e.places_image.image_nuit.src?s("div",{staticClass:"flex  border-2 border-gray-300 rounded-lg relative"},[s("img",{staticClass:"rounded-lg",attrs:{src:e.places_image.image_nuit.src,alt:"",srcset:""}}),s("button",{staticClass:"absolute bt rounded-full w-8 h-8 justify-center items-center flex",on:{click:function(t){return t.preventDefault(),e.delete_image("nuit")}}},[s("span",{staticClass:"material-icons"},[e._v(" clear ")])])]):s("label",{staticClass:" rounded-lg flex cursor-pointer justify-center items-center w-full border-dashed border-2 h-16 border-blue-400 bg-blue-300",attrs:{for:"photo_nuit"}},[s("span",[e._v("Cliquer pour insérer une photo")])]),s("input",{staticClass:"hidden",attrs:{accept:"image/*",id:"photo_nuit",type:"file"},on:{change:function(t){return e.upload_image("nuit",t)}}})])])])]),s("div",{staticClass:"p-2 border-t flex justify-end"},[s("button",{staticClass:" rounded-full flex justify-center items-center",class:e.on_load_image?"bt-disabled":"bt",attrs:{disabled:e.on_load_image}},[e.on_load_image?e._e():s("span",{staticClass:"material-icons"},[e._v("add_circle")]),s("span",[e._v(e._s(e.on_load_image?"...":"Créer"))])])])])])])])]):e._e()},d=[],u=(s("b0c0"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"map"}})}),p=[],m=s("4f96"),_=s("1da1"),f=(s("96cf"),s("d81d"),s("ac1f"),s("1276"),s("fb6a"),s("99af"),s("d3b7"),s("159b"),s("6cc5"),s("e192"),s("885b"),s("5c7a"),s("067d"),{props:["radius","places"],watch:{radius:function(e){this.circle_l.setRadius(e)}},components:{},data:function(){return{_radius:50,accessToken:"pk.eyJ1IjoiYW5nZWxvMTQyNyIsImEiOiJja3c0aGExMTIwNmp0Mm9udnY2bGNsZnRoIn0.PiJCKKLMoWzmULCaFs2CqA",circle_l:null,features_circle:null,origin_view:[-18.929670491513264,47.52685546875001],mymap:{}}},methods:{initmap:function(){var e=this;return Object(_["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s=e,e.mymap=o.a.map("map").setView(e.origin_view,16),o.a.tileLayer("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}",{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',maxZoom:18,id:"mapbox/streets-v11",tileSize:512,zoomOffset:-1,accessToken:"pk.eyJ1IjoiYW5nZWxvMTQyNyIsImEiOiJja3c0aGExMTIwNmp0Mm9udnY2bGNsZnRoIn0.PiJCKKLMoWzmULCaFs2CqA"}).addTo(e.mymap),e.mymap.dragging.enable(),e.features_circle=o.a.featureGroup().addTo(e.mymap),o.a.Control.geocoder({defaultMarkGeocode:!1}).addTo(e.mymap).on("markgeocode",(function(t){console.log(t.geocode),s.features_circle.clearLayers(),s.circle_l=o.a.circle(t.geocode.center,{color:"red",fillColor:"#f03",fillOpacity:.5,draggable:!0,radius:s.radius}).addTo(e.features_circle),e.mymap.setView(t.geocode.center,16),s.$emit("position",t.geocode.center);var a=t.geocode.name.split(","),i=Object(m["a"])(a),l=i[0],n=i[1];i.slice(2);e.location=l+","+n,e.$emit("place_name",e.location)})),e.mymap.on("click",(function(t){s.features_circle.clearLayers(),s.circle_l=o.a.circle(t.latlng,{color:"red",fillColor:"#f03",fillOpacity:.5,radius:s.radius}).addTo(e.features_circle),s.$emit("position",t.latlng),s.getLocation(t.latlng)}));case 7:case"end":return t.stop()}}),t)})))()},getLocation:function(e){var t=this;return Object(_["a"])(regeneratorRuntime.mark((function s(){var a,i,l,n,o;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,t.$http.get("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(e.lng,",").concat(e.lat,".json?access_token=").concat(t.accessToken));case 3:a=s.sent,i=a.data.features[0].place_name.split(","),l=Object(m["a"])(i),n=l[1],o=l[2],l.slice(3),t.location=n+","+o,t.$emit("place_name",t.location),s.next=12;break;case 9:s.prev=9,s.t0=s["catch"](0),console.log(s.t0);case 12:case"end":return s.stop()}}),s,null,[[0,9]])})))()},display_all_place:function(){var e=this;return Object(_["a"])(regeneratorRuntime.mark((function t(){var s,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s=o.a.featureGroup().addTo(e.mymap),a={},i={},e.places.forEach((function(e){a=o.a.circle([e.lat,e.lng],{color:"green",fillColor:"green",fillOpacity:.5,radius:e.radius}).addTo(s),i=new o.a.Popup({autoClose:!1,closeOnClick:!1}).setContent(e.label).setLatLng([e.lat,e.lng]),a.bindPopup(i),a.openPopup(i)}));case 4:case"end":return t.stop()}}),t)})))()}},mounted:function(){this.initmap(),this.display_all_place()}}),v=f,h=(s("ffad"),s("2877")),g=Object(h["a"])(v,u,p,!1,null,"b8e64600",null),b=g.exports,x={components:{LeafletMap:b},props:["show","places_list"],watch:{show:function(e){e&&(this.recup_soc_list("regisseur"),this.recup_soc_list("annonceur"))}},data:function(){return{places_image:{image_jour:{src:null,name:""},image_nuit:{src:null,name:""}},places:{head:[{code:"lat",label:"Latitude"},{code:"lng",label:"Longitude"},{code:"radius",label:"Rayon (en mètre)"},{code:"label",label:"Libellé"}],list:[],model:{latlng:"",radius:50,label:"",regisseur_id:"",annonceur_id:"",dimension_panneau:"",date_debut:"",nombre_light:1,photo_jour_id:null,photo_nuit_id:null}},info:{success:"",message:"",isOn:!1,idTimeout:-1},position_on_carte:[],current_position:[],current_place_name:"",regisseur:{list:[]},annonceur:{list:[]},on_load_image:!1}},methods:{post_add_place:function(){var e=this;this.$http.post("a/places",this.places.model).then((function(t){t.body.status?(e.$emit("success_add"),e.show_info(t.body.status,t.body.message,(function(){e.show_add_place(!1),e.$emit("close")})),e.places.model={latlng:"",radius:50,label:"",regisseur_id:"",annonceur_id:"",dimension_panneau:"",date_debut:"",nombre_light:1,image_jour:"",image_nuit:""}):e.show_info(t.body.status,t.body.message)}),(function(e){}))},recup_soc_list:function(e){var t=this;this.$http.get("a/society?type="+e).then((function(s){s.body.status?"regisseur"==e?t.regisseur.list=s.body.soc:t.annonceur.list=s.body.soc:alert(s.body.message)}),(function(e){}))},upload_image:function(e,t){console.log("Upload");var s=t.target.files[0],a=new FileReader;a.readAsDataURL(s);var i=this;i.on_load_image=!0,a.onload=function(t){if("jour"==e){i.places_image.image_jour.src=t.target.result,i.places_image.image_jour.name=i.makeid(10);var a=new FormData;a.append("name",i.places_image.image_jour.name),a.append("file",s),i.post_temp_image(a,(function(e){e.status?i.places.model.photo_jour_id=e.file_id:alert(e.message),i.on_load_image=!1}))}else{i.places_image.image_nuit.src=t.target.result,i.places_image.image_nuit.name=i.makeid(10);var l=new FormData;l.append("name",i.places_image.image_nuit.name),l.append("file",s),i.post_temp_image(l,(function(e){e.status?i.places.model.photo_nuit_id=e.file_id:alert(e.message),i.on_load_image=!1}))}}},delete_image:function(e){var t=this;"jour"==e?t.delete_temp_image(t.places.model.photo_jour_id,(function(e){e.status?(t.places_image.image_jour={src:null,name:""},t.places.model.photo_jour_id=null):alert(e.message)})):t.delete_temp_image(t.places.model.photo_nuit_id,(function(e){e.status?(t.places_image.image_nuit={src:null,name:""},t.places.model.photo_nuit_id=null):alert(e.message)}))},post_temp_image:function(e,t){this.$http.post("a/uploads",e).then((function(e){t(e.body)}),(function(e){}))},delete_temp_image:function(e,t){this.$http.delete("a/uploads/"+e).then((function(e){t(e.body)}),(function(e){}))},show_info:function(e,t,s){var a=this;this.info.message=t,this.info.isOn=!0,this.info.success=e,-1!=this.info.idTimeout&&clearTimeout(this.info.idTimeout),this.info.idTimeout=setTimeout((function(){a.info.isOn=!1,void 0!=s&&s()}),2e3)},show_add_place:function(e){e||this.$emit("close")},position:function(e){this.places.model.latlng=e.lat+","+e.lng},place_name:function(e){this.places.model.label=e},makeid:function(e){for(var t="",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=s.length,i=0;i<e;i++)t+=s.charAt(Math.floor(Math.random()*a));return t}}},y=x,C=Object(h["a"])(y,r,d,!1,null,null,null),w=C.exports,j={components:{ctable:l["a"],addPlace:w,cSelect:c["a"]},data:function(){return{places:{head:[{code:"annonceur_name",label:"Annonceur"},{code:"regisseur_name",label:"Régisseur"},{code:"label",label:"Lieu"},{code:"nombre_light",label:"Nb. Limières"},{code:"dimension_panneau",label:"Dim. Panneau"},{code:"date_debut",label:"Date Debut"}],list:[]},tri_select:[{label:"Lieu",code:"place.label"},{label:"Regisseur",code:"regisseur_name"},{label:"Annonceur",code:"annonceur_name"}],tri_selected:{},on_add_place:!1,search:"",search_cat:[{label:"Emplacement",code:"label"},{label:"Régisseur",code:"regisseur_name"},{label:"Annonceur",code:"annonceur_name"}],search_cat_selected:{}}},methods:{show_add_place:function(e){this.on_add_place=e},set_select_tri:function(e){this.tri_selected=this.tri_select[e],this.recup_place_list()},recup_place_list:function(){var e=this;this.$http.get("a/places/opt/"+this.tri_selected.code).then((function(t){t.body.status&&(e.places.list=t.body.places)}),(function(e){}))},delete_place:function(e){var t=this,s=confirm("Voulez vous vraiment supprimer l'emplacement +"+this.places.list[e].label+" !!?");s&&this.$http.delete("a/places/"+this.places.list[e].id).then((function(e){e.body.status?(alert(e.body.message),t.recup_place_list()):alert(e.body.message)}),(function(e){}))},view_place:function(e){var t=this.places.list[e].id;this.$router.push({name:"vue_emplacement",params:{id:t}})},set_select_search_cat:function(e){this.search_cat_selected=this.search_cat[e]}},created:function(){}},$=j,k=Object(h["a"])($,a,i,!1,null,null,null);t["default"]=k.exports},"845f":function(e,t,s){},"84eb":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"p-2"},[s("div",{},[s("div",{staticClass:"border-b mb-3 flex items-center pb-2"},[s("span",{staticClass:"text-xl text-gray-700 flex-grow "},[e._v(" Liste des utilisateurs - ")]),s("button",{staticClass:"ml-2 bt rounded-full flex justify-center items-center",on:{click:function(t){return e.show_add_user(!0)}}},[s("span",{staticClass:"material-icons"},[e._v(" add ")]),s("span",[e._v(" Ajouter ")])])]),s("div",{},[0!=e.users.list.length?s("ctable",{attrs:{_head:e.users.head,_list:e.users.list,_key:"login"},on:{on_view:e.view_user,on_delete:e.delete_user}}):s("div",{staticClass:"w-full flex justify-center items-center"},[s("span",{staticClass:"text-xl text-gray-600"},[e._v(" Aucun utiisateur à afficher. ")])])],1)]),e.on_add_user?s("div",{staticClass:"fixed flex justify-center items-center top-0 left-0 w-screen h-screen bg-gray-800 bg-opacity-80"},[s("div",{staticClass:"bg-gray-100 border flex flex-col border-green-400 rounded shadow-lg",style:{minWidth:"400px"}},[s("div",{staticClass:"border-b p-2 bg-green-400 flex"},[s("span",{staticClass:"flex-grow text-2xl text-gray-700 font-bold"},[e._v("Ajout d'un utilisateur")]),s("button",{staticClass:"w-8 h-8 rounded-full flex justify-center items-center text-gray-600\n                 hover:text-gray-800 duration-300",on:{click:function(t){return e.show_add_user(!1)}}},[s("span",{staticClass:"material-icons"},[e._v("clear")])])]),s("div",{staticClass:"duration-300 h-0 flex justify-center items-center",class:e.info.isOn?"h-14":"h-0"},[e.info.isOn?s("div",{staticClass:"rounded p-2 ",class:e.info.success?"bg-green-400":"bg-red-400"},[s("span",[e._v(" "+e._s(e.info.message)+" ")])]):e._e()]),s("form",{attrs:{action:"/",method:"post"},on:{submit:function(t){return t.preventDefault(),e.post_add_user.apply(null,arguments)}}},[s("div",{staticClass:"mt-2 p-2 flex"},[s("div",{staticClass:"flex flex-col pr-2"},[s("div",{staticClass:"mt-1 flex flex-col"},[s("span",{staticClass:"text-sm text-gray-600"},[e._v(" Nom ... ")]),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.users.model.nom,expression:"users.model.nom",modifiers:{trim:!0}}],staticClass:"input",attrs:{type:"text",placeholder:"Nom ..."},domProps:{value:e.users.model.nom},on:{input:function(t){t.target.composing||e.$set(e.users.model,"nom",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),s("div",{staticClass:"mt-1 flex flex-col"},[s("span",{staticClass:"text-sm text-gray-600"},[e._v(" Prénom ... ")]),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.users.model.prenom,expression:"users.model.prenom",modifiers:{trim:!0}}],staticClass:"input",attrs:{type:"text",placeholder:"Prénom ..."},domProps:{value:e.users.model.prenom},on:{input:function(t){t.target.composing||e.$set(e.users.model,"prenom",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),s("div",{staticClass:"mt-1 flex flex-col"},[s("span",{staticClass:"text-sm text-gray-600"},[e._v(" Login ... ")]),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.users.model.login,expression:"users.model.login",modifiers:{trim:!0}}],staticClass:"input",attrs:{type:"text",placeholder:"Login ..."},domProps:{value:e.users.model.login},on:{input:function(t){t.target.composing||e.$set(e.users.model,"login",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})])]),s("div",{staticClass:"pl-2 flex flex-col"},[s("div",{staticClass:"mt-1 flex flex-col"},[s("span",{staticClass:"text-sm text-gray-600"},[e._v(" Type ... ")]),s("select",{directives:[{name:"model",rawName:"v-model",value:e.users.model.type,expression:"users.model.type"}],staticClass:"input",attrs:{name:"",id:""},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.users.model,"type",t.target.multiple?s:s[0])}}},[s("option",{attrs:{value:"admin"}},[e._v("Admin")]),s("option",{attrs:{value:"personel"}},[e._v("Personel")])])]),s("div",{staticClass:"mt-1 flex flex-col"},[s("span",{staticClass:"text-sm text-gray-600"},[e._v(" Mot de passe ... ")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.users.model.pass,expression:"users.model.pass"}],staticClass:"input",attrs:{type:"text",placeholder:"Mot de passe ..."},domProps:{value:e.users.model.pass},on:{input:function(t){t.target.composing||e.$set(e.users.model,"pass",t.target.value)}}})])])]),e._m(0)])])]):e._e()])},i=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"p-2 border-t flex justify-end"},[s("button",{staticClass:"bt-w rounded"},[e._v(" Créer ")])])}],l=s("ae38"),n={components:{ctable:l["a"]},data:function(){return{test_message:"",users:{head:[{code:"login",label:"Login"},{code:"prenom",label:"Prénom"},{code:"nom",label:"Nom"},{code:"type",label:"Type"}],list:[],model:{login:"",prenom:"",nom:"",pass:"",type:"personel"}},info:{success:"",message:"",isOn:!1,idTimeout:-1},on_add_user:!1}},methods:{init:function(){this.test_message="SAlut test de message",this.recup_user_list()},recup_user_list:function(){var e=this;this.$http.get("a/users").then((function(t){console.log(t.body),t.body.status&&(e.users.list=t.body.users)}),(function(e){}))},show_add_user:function(e){this.on_add_user=e},post_add_user:function(){var e=this;this.$http.post("a/users",e.users.model).then((function(t){t.body.status?(e.show_info(t.body.status,t.body.message,(function(){e.show_add_user(!1)})),e.recup_user_list()):e.show_info(t.body.status,t.body.message)}))},show_info:function(e,t,s){var a=this;this.info.message=t,this.info.isOn=!0,this.info.success=e,-1!=this.info.idTimeout&&clearTimeout(this.info.idTimeout),this.info.idTimeout=setTimeout((function(){a.info.isOn=!1,void 0!=s&&s()}),2e3)},view_user:function(e){},delete_user:function(e){var t=this.users.list[e],s=confirm("Voulez-vous vraiment supprimer l'utilisateur ayant l'identifiant "+t.login);if(s){var a=this;this.$http.delete("a/users/"+t.id).then((function(e){e.body.status?(a.recup_user_list(),alert(e.body.message)):alert(e.body.message)}),(function(e){}))}}},created:function(){this.init()}},o=n,c=s("2877"),r=Object(c["a"])(o,a,i,!1,null,null,null);t["default"]=r.exports},"9ce0":function(e,t,s){"use strict";s("d64c")},"9e5f":function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"relative"},[s("button",{staticClass:"p-2 bt-select rounded border cursor-pointer bg-white",on:{blur:e.hide,click:e.show}},[e._v(" "+e._s(e.selected[e.label]+" "+(void 0!=e.label2?e.selected[e.label2]:""))+" ")]),e.clicked?s("div",{staticClass:"cselect-list bg-white shadow-lg absolute  rounded border top-0 z-40",on:{mouseover:function(t){return e.hover(!0)},mouseleave:function(t){return e.hover(!1)}}},[void 0!=e.search?s("div",{staticClass:"p-2"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.search_text,expression:"search_text",modifiers:{trim:!0}}],staticClass:"input",attrs:{type:"text",autofocus:"",placeholder:e.selected[e.label]+" "+(void 0!=e.label2?e.selected[e.label2]:"")},domProps:{value:e.search_text},on:{input:function(t){t.target.composing||(e.search_text=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]):e._e(),s("div",{staticClass:"overflow-auto c-list rounded-b"},e._l(e.datas,(function(t,a){return s("div",{directives:[{name:"show",rawName:"v-show",value:e.match_search(t),expression:"match_search(d)"}],key:t[e.code],staticClass:" flex items-center cursor-pointer p-2 hover:bg-blue-500 hover:text-white",class:a==e.id_selected?"bg-blue-200 c-list-selected":"",attrs:{title:void 0!=e.title_sens?t[e.title_sens]:""},on:{click:function(t){return e.selection(a,t)}}},[s("span",{staticClass:"pr-2"},[e._v(" "+e._s(t[e.label])+" ")]),void 0!=e.label2?s("span",{staticClass:"whitespace-nowrap pr-2"},[e._v(" "+e._s(t[e.label2])+" ")]):e._e(),void 0!=e.title_sens?s("span",{staticClass:"pr-2"},[e._v(" ("+e._s(t[e.title_sens])+") ")]):e._e(),a==e.id_selected?s("span",{staticClass:"text-right material-icons flex-grow"},[e._v("check_circle")]):e._e()])})),0)]):e._e()])},i=[],l=(s("4d63"),s("c607"),s("ac1f"),s("2c3e"),s("25f0"),s("466d"),{watch:{clicked:function(e){if(e){var t=this;setTimeout((function(){$(".c-list").scrollTop(t.scrollT)}),300),window.addEventListener("click",this.hide)}else window.removeEventListener("click",this.hide)},datas:function(){this.id_selected=0,this.selected=this.datas[this.id_selected],this.$emit("selected",this.id_selected)}},methods:{selection:function(e,t){e!=this.id_selected&&(this.id_selected=e,this.selected=this.datas[this.id_selected],this.is_hover=!1,this.$emit("selected",this.id_selected),this.scrollT=$(".c-list").scrollTop()),this.clicked=!1},show:function(e){this.clicked=!0,this.currentTarget=e.currentTarget},hover:function(e){this.is_hover=e},hide:function(e){(null!=e.target.nextElementSibling||this.is_hover)&&(null==e.target.nextElementSibling||e.target.nextElementSibling.classList.contains("cselect-list"))||(this.clicked=!1)},test:function(){console.log("load")},match_search:function(e){if(""==this.search_text)return!0;var t=new RegExp(".?"+this.search_text+".?","gi");return null!=e[this.label].match(t)||void 0!=this.label2&&null!=e[this.label2].match(t)}},computed:{},props:["datas","label","label2","code","search","title_sens"],data:function(){return{selected:this.datas[0],id_selected:0,clicked:!1,currentTarget:null,scrollT:0,search_text:""}},created:function(){this.selected=this.datas[this.id_selected],this.$emit("selected",this.id_selected)},mounted:function(){}}),n=l,o=(s("b2e6"),s("2877")),c=Object(o["a"])(n,a,i,!1,null,"9a50e8b4",null);t["a"]=c.exports},ae38:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("table",{staticClass:"w-full text-gray-700 rounded"},[s("thead",{staticClass:"rounded"},[s("tr",{staticClass:"text-left border-b bg-green-400 rounded-t"},[e._l(e._head,(function(t){return s("th",{key:t.label},[e._v(" "+e._s(t.label)+" ")])})),s("th")],2)]),s("tbody",e._l(e._list,(function(t,a){return s("tr",{directives:[{name:"show",rawName:"v-show",value:e.match_search(t),expression:"match_search(d)"}],key:t[e._key],staticClass:"cursor-pointer duration-300 hover:bg-blue-200 hover:bg-opacity-20 text-left bg-gray-300 bg-opacity-5 rounded-t",on:{click:function(t){return e.click_ligne(a)}}},[e._l(e._head,(function(a){return s("td",{key:a.label},[e._v(" "+e._s(t[a.code])+" ")])})),s("td",{staticClass:"flex justify-end items-center"},[s("button",{staticClass:"bt-icon mr-2",on:{click:function(t){return e.on_delete(a)}}},[s("span",{staticClass:"material-icons"},[e._v(" delete ")])]),s("button",{staticClass:"bt-icon mr-2",on:{click:function(t){return e.on_view(a)}}},[s("span",{staticClass:"material-icons"},[e._v(" open_in_full ")])])])],2)})),0)])},i=[],l=(s("ac1f"),s("841c"),s("4d63"),s("c607"),s("2c3e"),s("25f0"),s("466d"),{props:["_head","_list","_key","search","col_search"],data:function(){return{}},methods:{click_ligne:function(e){this.$emit("on_click",e)},on_delete:function(e){this.$emit("on_delete",e)},on_view:function(e){this.$emit("on_view",e)},match_search:function(e){if(void 0===this.col_search)return!0;if(null==e[this.col_search])return!1;if(void 0!=this.search&&""!=this.search){var t=new RegExp(".?"+this.search+".?","gi");return null!=e[this.col_search].match(t)}return!0}}}),n=l,o=s("2877"),c=Object(o["a"])(n,a,i,!1,null,null,null);t["a"]=c.exports},b2e6:function(e,t,s){"use strict";s("ec0d")},d64c:function(e,t,s){},e26c:function(e,t,s){"use strict";s.r(t);var a=s("8c4f"),i=[{path:"/",component:s("1384").default,name:"home"},{path:"/parametres",component:s("56d9").default,name:"settings"},{path:"/utilisateur",component:s("84eb").default,name:"user"},{path:"/emplacement",component:s("6fb8").default,name:"emplacement"},{path:"/society",component:s("4f5d").default,name:"society"},{path:"/emplacement/:id",component:s("f0fa").default,name:"vue_emplacement"},{path:"/stat",component:s("4efb").default,name:"stat"}];t["default"]=new a["a"]({routes:i})},ec0d:function(e,t,s){},f0fa:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"flex"},[s("div",{staticClass:"flex-grow max-h-screen",staticStyle:{height:"100vh"},attrs:{id:"map"}}),e.on_modif?s("div",{staticClass:"p-2 flex flex-col max-h-screen overflow-auto items-center",style:{width:"400px"}},[s("form",{staticClass:"flex flex-col ",attrs:{action:"/",method:"post"},on:{submit:function(t){return t.preventDefault(),e.post_modif_place.apply(null,arguments)}}},[s("div",{staticClass:"mt-2 p-2 flex flex-col justify-end overflow-auto"},[s("div",{staticClass:"flex flex-col pr-2"},[s("div",{staticClass:"mt-1 flex flex-col"},[s("span",{staticClass:"text-sm text-gray-600"},[e._v(" Latitude et Longitude ... ")]),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.places.model.latlng,expression:"places.model.latlng",modifiers:{trim:!0}}],staticClass:"input",attrs:{type:"text",placeholder:"@exemple  -14.545454545, 48.15465445646546 ..."},domProps:{value:e.places.model.latlng},on:{input:function(t){t.target.composing||e.$set(e.places.model,"latlng",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),s("div",{staticClass:"mt-1 flex flex-col"},[s("span",{staticClass:"text-sm text-gray-600"},[e._v(" Rayon (en mètre) ... ")]),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.places.model.radius,expression:"places.model.radius",modifiers:{trim:!0}}],staticClass:"input",attrs:{type:"number",placeholder:"@exemple 50 ..."},domProps:{value:e.places.model.radius},on:{input:function(t){t.target.composing||e.$set(e.places.model,"radius",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),s("div",{staticClass:"mt-1 flex flex-col"},[s("span",{staticClass:"text-sm text-gray-600"},[e._v(" Lieu ... ")]),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.places.model.label,expression:"places.model.label",modifiers:{trim:!0}}],staticClass:"input",attrs:{type:"text",placeholder:"@exemple Analakely ..."},domProps:{value:e.places.model.label},on:{input:function(t){t.target.composing||e.$set(e.places.model,"label",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),s("div",{staticClass:"mt-1 flex flex-col"},[s("span",{staticClass:"text-sm text-gray-600"},[e._v(" Régisseur ... ")]),s("select",{directives:[{name:"model",rawName:"v-model",value:e.places.model.regisseur_id,expression:"places.model.regisseur_id"}],staticClass:"input",on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.places.model,"regisseur_id",t.target.multiple?s:s[0])}}},e._l(e.regisseur.list,(function(t,a){return s("option",{key:t.id,domProps:{selected:0==a,value:t.id}},[e._v(" "+e._s(t.label)+" ")])})),0)]),s("div",{staticClass:"mt-1 flex flex-col"},[s("span",{staticClass:"text-sm text-gray-600"},[e._v(" Annonceur ... ")]),s("select",{directives:[{name:"model",rawName:"v-model",value:e.places.model.annonceur_id,expression:"places.model.annonceur_id"}],staticClass:"input",on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.places.model,"annonceur_id",t.target.multiple?s:s[0])}}},e._l(e.annonceur.list,(function(t,a){return s("option",{key:t.id,domProps:{selected:0==a,value:t.id}},[e._v(" "+e._s(t.label)+" ")])})),0)]),s("div",{staticClass:"mt-1 flex flex-col"},[s("span",{staticClass:"text-sm text-gray-600"},[e._v(" Dimension Panneau ... ")]),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.places.model.dimension_panneau,expression:"places.model.dimension_panneau",modifiers:{trim:!0}}],staticClass:"input",attrs:{type:"text",placeholder:"Dimension panneau..."},domProps:{value:e.places.model.dimension_panneau},on:{input:function(t){t.target.composing||e.$set(e.places.model,"dimension_panneau",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),s("div",{staticClass:"mt-1 flex flex-col"},[s("span",{staticClass:"text-sm text-gray-600"},[e._v(" Nombre de lumière ... ")]),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.places.model.nombre_light,expression:"places.model.nombre_light",modifiers:{trim:!0}}],staticClass:"input",attrs:{type:"number",min:"1",max:"100",placeholder:"Nombre de lumière ..."},domProps:{value:e.places.model.nombre_light},on:{input:function(t){t.target.composing||e.$set(e.places.model,"nombre_light",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),s("div",{staticClass:"mt-1 flex flex-col"},[s("span",{staticClass:"text-sm text-gray-600"},[e._v(" Date de début ... ")]),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.places.model.date_debut,expression:"places.model.date_debut",modifiers:{trim:!0}}],staticClass:"input",attrs:{type:"date",placeholder:"Nombre de lumière ..."},domProps:{value:e.places.model.date_debut},on:{input:function(t){t.target.composing||e.$set(e.places.model,"date_debut",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),s("div",{staticClass:"mt-1 flex flex-col"},[s("span",{staticClass:"text-sm text-gray-600"},[e._v(" Photo Jour ... ")]),s("div",{staticStyle:{width:"250px"}},[null!=e.places_image.image_jour.src?s("div",{staticClass:"flex  border-2 border-gray-300 rounded-lg relative"},[s("img",{staticClass:"rounded-lg",attrs:{src:e.places_image.image_jour.src,alt:""}}),s("button",{staticClass:"absolute bt rounded-full w-8 h-8 justify-center items-center flex",on:{click:function(t){return t.preventDefault(),e.delete_image("jour")}}},[s("span",{staticClass:"material-icons"},[e._v(" clear ")])])]):s("label",{staticClass:" rounded-lg flex cursor-pointer justify-center items-center w-full border-dashed border-2 h-16 border-blue-400 bg-blue-300",attrs:{for:"photo_jour"}},[s("span",[e._v("Cliquer pour insérer une photo")])]),s("input",{staticClass:"hidden",attrs:{accept:"image/*",id:"photo_jour",type:"file"},on:{change:function(t){return e.upload_image("jour",t)}}})])]),s("div",{staticClass:"mt-1 flex flex-col"},[s("span",{staticClass:"text-sm text-gray-600"},[e._v("Photo Nuit ... ")]),s("div",{staticStyle:{width:"250px"}},[null!=e.places_image.image_nuit.src?s("div",{staticClass:"flex  border-2 border-gray-300 rounded-lg relative"},[s("img",{staticClass:"rounded-lg",attrs:{src:e.places_image.image_nuit.src,alt:""}}),s("button",{staticClass:"absolute bt rounded-full w-8 h-8 justify-center items-center flex",on:{click:function(t){return t.preventDefault(),e.delete_image("nuit")}}},[s("span",{staticClass:"material-icons"},[e._v(" clear ")])])]):s("label",{staticClass:" rounded-lg flex cursor-pointer justify-center items-center  border-dashed border-2 h-16 border-blue-400 bg-blue-300",attrs:{for:"photo_nuit"}},[s("span",[e._v("Cliquer pour insérer une photo")])]),s("input",{staticClass:"hidden",attrs:{accept:"image/*",id:"photo_nuit",type:"file"},on:{change:function(t){return e.upload_image("nuit",t)}}})])])])]),s("div",{staticClass:"p-2 border w-full flex justify-end sticky bottom-0 bg-gray-100 rounded-lg"},[s("button",{staticClass:"mr-5 bt rounded-full flex justify-center items-center",on:{click:function(t){return t.preventDefault(),e.show_modif(!1)}}},[s("span",{staticClass:"material-icons"},[e._v("clear")])]),s("button",{staticClass:" rounded-full flex justify-center items-center",class:"bt"+(e.on_load_image?"-disabled":""),attrs:{disabled:e.on_load_image}},[e.on_load_image?e._e():s("span",{staticClass:"material-icons"},[e._v("edit")]),s("span",[e._v(" "+e._s(e.on_load_image?"...":"Valider la modification")+" ")])])])])]):s("div",{staticClass:"p-2 flex flex-col max-h-screen overflow-auto",style:{width:"400px"}},[s("div",{staticClass:"p-2"},[s("div",{staticClass:"p-2 mb-2 border bg-green-300 bg-opacity-10  rounded"},[s("span",[e._v("Latitude : ")]),e._v(" "),s("span",{staticClass:"font-bold"},[e._v(" "+e._s(e.place.lat)+" ")])]),s("div",{staticClass:"p-2 border bg-green-300 bg-opacity-10 rounded"},[s("span",[e._v("Logitude : ")]),e._v(" "),s("span",{staticClass:"font-bold"},[e._v(" "+e._s(e.place.lng)+" ")])])]),s("div",{staticClass:"p-2"},[s("div",{staticClass:"p-2 border bg-green-300 bg-opacity-10 rounded"},[s("span",[e._v(" Rayon (en mètre) : ")]),e._v(" "),s("span",{staticClass:"font-bold"},[e._v(" "+e._s(e.place.radius)+" ")])])]),s("div",{staticClass:"p-2"},[s("div",{staticClass:"p-2 border bg-green-300 bg-opacity-10 rounded"},[s("span",{},[e._v(" Libellé : ")]),e._v(" "),s("span",{staticClass:"font-bold"},[e._v(" "+e._s(e.place.label)+" ")])])]),s("div",{staticClass:"p-2"},[s("div",{staticClass:"p-2 border bg-green-300 bg-opacity-10 rounded"},[s("span",{},[e._v(" Regisseur : ")]),e._v(" "),s("span",{staticClass:"font-bold"},[e._v(" "+e._s(null!=e.place.regisseur_name?e.place.regisseur_name:"Inexistant")+" ")])])]),s("div",{staticClass:"p-2"},[s("div",{staticClass:"p-2 border bg-green-300 bg-opacity-10 rounded"},[s("span",{},[e._v(" Annonceur : ")]),e._v(" "),s("span",{staticClass:"font-bold"},[e._v(" "+e._s(null!=e.place.annonceur_name?e.place.annonceur_name:"Inexistant")+" ")])])]),s("div",{staticClass:"p-2"},[s("div",{staticClass:"p-2 border bg-green-300 bg-opacity-10 rounded"},[s("span",{},[e._v(" Nombre de lumière : ")]),e._v(" "),s("span",{staticClass:"font-bold"},[e._v(" "+e._s(null!=e.place.nombre_light?e.place.nombre_light:"Inexistant")+" ")])])]),s("div",{staticClass:"p-2"},[s("div",{staticClass:"p-2 border bg-green-300 bg-opacity-10 rounded"},[s("span",{},[e._v(" Dimension Panneau : ")]),e._v(" "),s("span",{staticClass:"font-bold"},[e._v(" "+e._s(null!=e.place.dimension_panneau&&""!=e.place.dimension_panneau?e.place.dimension_panneau:"Inexistant")+" ")])])]),s("div",{staticClass:"p-2"},[s("div",{staticClass:"p-2 border bg-green-300 bg-opacity-10 rounded"},[s("span",{},[e._v(" Date début : ")]),e._v(" "),s("span",{staticClass:"font-bold"},[e._v(" "+e._s(null!=e.place.date_debut&&""!=e.place.date_debut?e.place.date_debut:"Inexistant")+" ")])])]),s("div",{staticClass:"flex flex-col p-2 border bg-blue-300 bg-opacity-10 rounded"},[s("span",[e._v(" Photo Jour ")]),void 0!=e.place.photo_jour||null!=e.place.photo_jour?s("div",{staticClass:"flex h-80 "},[s("img",{staticClass:"object-cover rounded-lg",attrs:{src:"api/p/media/"+e.place.photo_jour,loading:"lazy",crossorigin:"anonymous"}})]):s("div",[s("span",{},[e._v(" Photo indisponible ou inexistant ")])])]),s("div",{staticClass:"flex flex-col p-2 border bg-blue-300 bg-opacity-10 rounded"},[s("span",[e._v(" Photo Nuit ")]),void 0!=e.place.photo_nuit||null!=e.place.photo_nuit?s("div",{staticClass:"flex h-80 "},[s("img",{staticClass:"object-cover rounded-lg",attrs:{src:"api/p/media/"+e.place.photo_nuit,loading:"lazy",crossorigin:"anonymous"}})]):s("div",[s("span",{},[e._v(" Photo indisponible ou inexistant ")])])]),s("div",{staticClass:"flex p-2 border rounded-lg mt-2 shadow-lg justify-end items-center sticky bottom-0 bg-gray-100"},[s("button",{staticClass:"flex justify-center items-center bt rounded-full",on:{click:function(t){return e.show_modif(!0)}}},[s("span",{staticClass:"material-icons"},[e._v("edit")]),s("span",{},[e._v("Modifier")])])])])])},i=[],l=s("1da1"),n=(s("96cf"),s("d81d"),s("d3b7"),s("159b"),s("b0c0"),{watch:{on_modif:function(e){e?(this.recup_soc_list("regisseur"),this.recup_soc_list("annonceur"),this.recup_place_list(),this.set_place_modif_model()):(this.mymap.removeLayer(this.place_layer),this.recup_emplacement())}},data:function(){return{places_image:{image_jour:{src:null,name:""},image_nuit:{src:null,name:""}},radius:50,place_layer:{},accessToken:"pk.eyJ1IjoiYW5nZWxvMTQyNyIsImEiOiJja3c0aGExMTIwNmp0Mm9udnY2bGNsZnRoIn0.PiJCKKLMoWzmULCaFs2CqA",circle_l:null,features_circle:null,origin_view:[0,0],mymap:{},place:{},places:{list:[],model:{latlng:"",radius:50,label:"",regisseur_id:"",annonceur_id:"",dimension_panneau:"",date_debut:"",nombre_light:1,photo_jour_id:null,photo_nuit_id:null}},on_modif:!1,regisseur:{list:[]},annonceur:{list:[]},on_load_image:!1}},methods:{initmap:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s=e,e.mymap=L.map("map").setView(e.origin_view,18),L.tileLayer("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}",{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',maxZoom:18,id:"mapbox/streets-v11",tileSize:512,zoomOffset:-1,accessToken:"pk.eyJ1IjoiYW5nZWxvMTQyNyIsImEiOiJja3c0aGExMTIwNmp0Mm9udnY2bGNsZnRoIn0.PiJCKKLMoWzmULCaFs2CqA"}).addTo(e.mymap),e.features_circle=L.featureGroup().addTo(e.mymap),s.features_circle.clearLayers(),s.circle_l=L.circle(e.origin_view,{color:"red",fillColor:"#f03",fillOpacity:.5,radius:e.radius}).bindPopup(e.place.label).addTo(e.features_circle),s.circle_l.openPopup(e.origin_view),e.mymap.on("click",(function(t){s.on_modif&&(s.features_circle.clearLayers(),s.circle_l=L.circle(t.latlng,{color:"red",fillColor:"#f03",fillOpacity:.5,radius:s.places.model.radius}).addTo(e.features_circle),s.position(t.latlng))}));case 8:case"end":return t.stop()}}),t)})))()},display_all_place:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.place_layer=L.featureGroup().addTo(e.mymap),s={},a={},e.places.list.forEach((function(t){t.id!=e.place.id&&(s=L.circle([t.lat,t.lng],{color:"green",fillColor:"green",fillOpacity:.5,radius:t.radius}).addTo(e.place_layer),a=new L.Popup({autoClose:!1,closeOnClick:!1}).setContent(t.label).setLatLng([t.lat,t.lng]),s.bindPopup(a),s.openPopup(a))}));case 4:case"end":return t.stop()}}),t)})))()},init_position_emplacement:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s=e,s.features_circle.clearLayers(),s.circle_l=L.circle(e.origin_view,{color:"red",fillColor:"#f03",fillOpacity:.5,radius:e.radius}).bindPopup(e.place.label).addTo(e.features_circle),s.circle_l.openPopup(e.origin_view);case 4:case"end":return t.stop()}}),t)})))()},recup_emplacement:function(){var e=this;this.$http.get("a/places/"+this.$route.params.id).then((function(t){t.body.status?(e.place=t.body.place,e.origin_view=[e.place.lat,e.place.lng],e.radius=e.place.radius,e.initmap(),e.init_position_emplacement()):e.$router.push({name:"emplacement"})}),(function(e){alert("Erreur de Réseau")}))},show_modif:function(e){this.on_modif=e},recup_soc_list:function(e){var t=this;this.$http.get("a/society?type="+e).then((function(s){s.body.status?"regisseur"==e?t.regisseur.list=s.body.soc:t.annonceur.list=s.body.soc:alert(s.body.message)}),(function(e){}))},upload_image:function(e,t){console.log("Upload");var s=t.target.files[0],a=new FileReader;a.readAsDataURL(s);var i=this;i.on_load_image=!0,a.onload=function(t){if("jour"==e){i.places_image.image_jour.src=t.target.result,i.places_image.image_jour.name=i.makeid(10);var a=new FormData;a.append("name",i.places_image.image_jour.name),a.append("file",s),i.post_temp_image(a,(function(e){e.status?i.places.model.photo_jour_id=e.file_id:alert(e.message),i.on_load_image=!1}))}else{i.places_image.image_nuit.src=t.target.result,i.places_image.image_nuit.name=i.makeid(10);var l=new FormData;l.append("name",i.places_image.image_nuit.name),l.append("file",s),i.post_temp_image(l,(function(e){e.status?i.places.model.photo_nuit_id=e.file_id:alert(e.message),i.on_load_image=!1}))}}},delete_image:function(e){var t=this;"jour"==e?t.delete_temp_image(t.places.model.photo_jour_id,(function(e){e.status?(t.places_image.image_jour={src:null,name:""},t.places.model.photo_jour_id=null):(t.places.model.photo_jour_id=null,t.post_alt_modif_place({photo_jour_id:null}).then((function(e){e.body.status&&(t.places_image.image_jour={src:null,name:""})})))})):t.delete_temp_image(t.places.model.photo_nuit_id,(function(e){e.status?(t.places_image.image_nuit={src:null,name:""},t.places.model.photo_nuit_id=null):(t.places.model.photo_nuit_id=null,t.post_alt_modif_place({photo_nuit_id:null}).then((function(e){e.body.status&&(t.places_image.image_nuit={src:null,name:""})})))}))},position:function(e){this.places.model.latlng=e.lat+","+e.lng},post_temp_image:function(e,t){this.$http.post("a/uploads",e).then((function(e){t(e.body)}),(function(e){}))},delete_temp_image:function(e,t){this.$http.delete("a/uploads/"+e).then((function(e){t(e.body)}),(function(e){}))},recup_place_list:function(){var e=this;this.$http.get("a/places").then((function(t){t.body.status&&(e.places.list=t.body.places,e.display_all_place())}),(function(e){}))},set_place_modif_model:function(){this.places.model={latlng:this.place.lat+","+this.place.lng,radius:this.place.radius,label:this.place.label,regisseur_id:this.place.regisseur_id,annonceur_id:this.place.annonceur_id,dimension_panneau:this.place.dimension_panneau,date_debut:this.place.date_debut,nombre_light:this.place.nombre_light,photo_jour_id:this.place.photo_jour_id,photo_nuit_id:this.place.photo_nuit_id},null!=this.place.photo_jour_id&&(this.places_image.image_jour.src="api/p/media/"+this.place.photo_jour,this.places_image.image_jour.name=this.place.photo_jour),null!=this.place.photo_nuit_id&&(this.places_image.image_nuit.src="api/p/media/"+this.place.photo_nuit,this.places_image.image_nuit.name=this.place.photo_nuit),console.log(this.places_image)},makeid:function(e){for(var t="",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=s.length,i=0;i<e;i++)t+=s.charAt(Math.floor(Math.random()*a));return t},post_modif_place:function(){var e=this;this.$http.put("a/places/"+this.place.id,this.places.model).then((function(t){t.body.status&&e.show_modif(!1)}))},post_alt_modif_place:function(e){this.$http.put("a/places/modif/"+this.place.id,e).then((function(e){e.body.status}))}},mounted:function(){this.recup_emplacement()}}),o=n,c=(s("112b"),s("2877")),r=Object(c["a"])(o,a,i,!1,null,"7545cc1a",null);t["default"]=r.exports},ffad:function(e,t,s){"use strict";s("3bd8")}});
//# sourceMappingURL=index.aa874b3b.js.map